<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a complete ggplot for a spatial interaction model — autoplot.sim • blvim</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a complete ggplot for a spatial interaction model — autoplot.sim"><meta name="description" content="This function represents graphical the flows of a spatial interaction model,
in different direct or aggregated forms."><meta property="og:description" content="This function represents graphical the flows of a spatial interaction model,
in different direct or aggregated forms."><meta property="og:image" content="https://fabrice-rossi.github.io/blvim/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">blvim</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/grid.html">Systematic exploration of the BLV solution space</a></li>
    <li><a class="dropdown-item" href="../articles/theory.html">Theoretical Background</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://fabrice-rossi.github.io/blog/posts/blvim-0-1.html">blvim 0.1.1</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/fabrice-rossi/blvim/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Create a complete ggplot for a spatial interaction model</h1>
      <small class="dont-index">Source: <a href="https://github.com/fabrice-rossi/blvim/blob/main/R/sim_autoplot.R" class="external-link"><code>R/sim_autoplot.R</code></a></small>
      <div class="d-none name"><code>autoplot.sim.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function represents graphical the flows of a spatial interaction model,
in different direct or aggregated forms.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'sim'</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  flows <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"full"</span>, <span class="st">"destination"</span>, <span class="st">"attractiveness"</span><span class="op">)</span>,</span>
<span>  with_names <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  with_positions <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  show_destination <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  show_attractiveness <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  show_production <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  cut_off <span class="op">=</span> <span class="fl">100</span> <span class="op">*</span> <span class="va">.Machine</span><span class="op">$</span><span class="va">double.eps</span><span class="op">^</span><span class="fl">0.5</span>,</span>
<span>  adjust_limits <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  with_labels <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>a spatial interaction model object</p></dd>


<dt id="arg-flows">flows<a class="anchor" aria-label="anchor" href="#arg-flows"></a></dt>
<dd><p><code>"full"</code> (default),  <code>"destination"</code> or <code>"attractiveness"</code>, see
details.</p></dd>


<dt id="arg-with-names">with_names<a class="anchor" aria-label="anchor" href="#arg-with-names"></a></dt>
<dd><p>specifies whether the graphical representation includes
location names (<code>FALSE</code> by default)</p></dd>


<dt id="arg-with-positions">with_positions<a class="anchor" aria-label="anchor" href="#arg-with-positions"></a></dt>
<dd><p>specifies whether the graphical representation is based
on location positions (<code>FALSE</code> by default)</p></dd>


<dt id="arg-show-destination">show_destination<a class="anchor" aria-label="anchor" href="#arg-show-destination"></a></dt>
<dd><p>specifies whether the position based <code>"full"</code> flow
figure includes a representation of the destination flows (<code>FALSE</code> by
default)</p></dd>


<dt id="arg-show-attractiveness">show_attractiveness<a class="anchor" aria-label="anchor" href="#arg-show-attractiveness"></a></dt>
<dd><p>specifies whether the position based <code>"full"</code> flow
figure includes a representation of the attractivenesses  (<code>FALSE</code> by
default)</p></dd>


<dt id="arg-show-production">show_production<a class="anchor" aria-label="anchor" href="#arg-show-production"></a></dt>
<dd><p>specifies whether the position based <code>"full"</code> flow
figure includes a representation of the productions (<code>FALSE</code> by default)</p></dd>


<dt id="arg-cut-off">cut_off<a class="anchor" aria-label="anchor" href="#arg-cut-off"></a></dt>
<dd><p>cut off limit for inclusion of a graphical primitive when
<code>with_positions = TRUE</code>. In the full flow matrix representation, segments
are removed when their flow is smaller than the cut off. In the
attractiveness or destination representation, disks are removed when the
corresponding value is below the cut off.</p></dd>


<dt id="arg-adjust-limits">adjust_limits<a class="anchor" aria-label="anchor" href="#arg-adjust-limits"></a></dt>
<dd><p>if <code>FALSE</code> (default value), the limits of the position
based graph are not adjusted after removing graphical primitives. This
eases comparison between graphical representations with different cut off
value. If <code>TRUE</code>, limits are adjusted to the data using the standard
ggplot2 behaviour.</p></dd>


<dt id="arg-with-labels">with_labels<a class="anchor" aria-label="anchor" href="#arg-with-labels"></a></dt>
<dd><p>if <code>FALSE</code> (default value) names are displayed using plain
texts. If <code>TRUE</code>, names are shown using labels.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional parameters, see details</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a ggplot object</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The graphical representation depends on the values of <code>flows</code> and
<code>with_positions</code>. It is based on the data frame representation produced by
<code><a href="fortify.sim.html">fortify.sim()</a></code>.</p>
<p>If <code>with_position</code> is <code>FALSE</code> (default value), the graphical representations
are "abstract". Depending on <code>flows</code> we have the following representations:</p><ul><li><p><code>"full"</code>: this is the default case for which the full flow matrix is
represented. It is extracted from the spatial interaction model with
<code><a href="flows.html">flows()</a></code> and displayed using a matrix representation with origin locations
in rows and destination locations in columns. The colour of a cell
corresponds to the intensity of a flow between the corresponding locations.
To mimic the standard top to bottom reading order of a flow matrix, the top
row of the graphical representation corresponds to the first origin location.</p></li>
<li><p><code>"destination"</code>: the function computes the
incoming flows for destination locations (using <code><a href="destination_flow.html">destination_flow()</a></code>) and
represents them with a bar plot (each bar is proportional to the incoming
flow);</p></li>
<li><p><code>"attractiveness"</code>: the function uses a bar plot to represent the
attractivenesses of the destination locations (as given by
<code><a href="attractiveness.html">attractiveness()</a></code>). This is interesting for dynamic models where those
values are updated during the iterations (see <code><a href="blvim.html">blvim()</a></code> for details). When
the calculation has converged (see <code><a href="sim_converged.html">sim_converged()</a></code>), both <code>"destination"</code>
and <code>"attractiveness"</code> graphics should be almost identical.</p></li>
</ul><p>When the <code>with_names</code> parameter is <code>TRUE</code>, the location names
(<code><a href="location_names.html">location_names()</a></code>) are used to label the axis of the graphical
representation. If names are not specified, they are replaced by indexes.</p>
<p>When the  <code>with_positions</code> parameter is <code>TRUE</code>, the location positions
(<code><a href="location_positions.html">location_positions()</a></code>) are used to produce more "geographically informed"
representations. Notice that if no positions are known for the locations, the
use of <code>with_positions = TRUE</code> is an error. Depending on <code>flows</code> we have the
following representations:</p><ul><li><p><code>"full"</code>: this is the default case for which the full flow matrix is
represented. Positions for both origin and destination locations are needed.
The representation uses arrows from origin location positions to destination
location positions. The thickness of the lines (<code>linewidth</code> aesthetics) is
proportional to the flows. Only segments that carry a flow above the
<code>cut_off</code> value are included. When the spatial interaction model is not
bipartite (see <code><a href="sim_is_bipartite.html">sim_is_bipartite()</a></code>), zero length segments corresponding to
self exchange are removed. Additional parameters in <code>...</code> are submitted to
<code><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">ggplot2::geom_segment()</a></code>. This can be used to override defaults parameters
used for the arrow shapes, for instance. Those parameters must be named. In
addition to the individual flows, the representation can include location
based information. If <code>show_production</code> is <code>TRUE</code>, the production constraints
(obtained by <code><a href="production.html">production()</a></code>) are shown as disks centred on the origin
locations. If <code>show_destination</code> is <code>TRUE</code>, incoming flows (obtained by
<code><a href="destination_flow.html">destination_flow()</a></code>) are shown as disks centred on the destination
locations. If <code>show_attractiveness</code> is <code>TRUE</code>, attractivenesses (obtained by
<code><a href="attractiveness.html">attractiveness()</a></code>) are shown as disks centred on the destination locations.
<code>show_destination</code> and <code>show_attractiveness</code> are not compatible (only one can
be <code>TRUE</code>). <code>show_production</code> is compatible with <code>show_destination</code> or
<code>show_attractiveness</code> for bipartite models only (see <code><a href="sim_is_bipartite.html">sim_is_bipartite()</a></code>).
When disks are used, segments are drawn without arrows, while the default
drawing uses arrows. This can be modified with the additional parameters.</p></li>
<li><p><code>"destination"</code>: the function draws a disk at each destination location
using for the <code>size</code> aesthetics the incoming flow at this destination
location (using <code><a href="destination_flow.html">destination_flow()</a></code>). Only destinations with an incoming
flow above  the <code>cut_off</code> value are included.</p></li>
<li><p><code>"attractiveness"</code>: the function draws a disk at each destination location
using for the <code>size</code> aesthetics the attractiveness of the destination. When
the calculation has converged (see <code><a href="sim_converged.html">sim_converged()</a></code>), both <code>"destination"</code>
and <code>"attractiveness"</code> graphics should be almost identical. Only destinations
with an attractiveness above  the <code>cut_off</code> value are included.</p></li>
</ul><p>For the position based representations and when <code>with_names</code> is <code>TRUE</code>, the
names of the destinations are added to the graphical representation . If
<code>with_labels</code> is <code>TRUE</code> the names are represented as labels instead of plain
texts (see <code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">ggplot2::geom_label()</a></code>). If the <code>ggrepel</code> package is installed,
its functions are used instead of <code>ggplot2</code> native functions. When disks are
used to show aggregated flows, the names match the chosen locations: for
destination flow and attractiveness, destination locations are named, while
for production, origin locations are named (they can be both named when the
model is bipartite).</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="fortify.sim.html">fortify.sim()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">positions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">french_cities</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"th_longitude"</span>, <span class="st">"th_latitude"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">distances</span> <span class="op">&lt;-</span> <span class="va">french_cities_distances</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span> <span class="op">/</span> <span class="fl">1000</span> <span class="co">## convert to km</span></span></span>
<span class="r-in"><span><span class="va">production</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">attractiveness</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">french_cities</span><span class="op">$</span><span class="va">area</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">flows</span> <span class="op">&lt;-</span> <span class="fu"><a href="blvim.html">blvim</a></span><span class="op">(</span><span class="va">distances</span>, <span class="va">production</span>, <span class="fl">1.5</span>, <span class="fl">1</span> <span class="op">/</span> <span class="fl">150</span>, <span class="va">attractiveness</span>,</span></span>
<span class="r-in"><span>  origin_data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    names <span class="op">=</span> <span class="va">french_cities</span><span class="op">$</span><span class="va">name</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>    positions <span class="op">=</span> <span class="va">positions</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  destination_data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    names <span class="op">=</span> <span class="va">french_cities</span><span class="op">$</span><span class="va">name</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>    positions <span class="op">=</span> <span class="va">positions</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  bipartite <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">flows</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="autoplot.sim-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co">## bar plots should be almost identical if convergence occurred</span></span></span>
<span class="r-in"><span><span class="fu"><a href="sim_converged.html">sim_converged</a></span><span class="op">(</span><span class="va">flows</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">flows</span>, <span class="st">"destination"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="autoplot.sim-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">flows</span>, <span class="st">"attractiveness"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="autoplot.sim-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co">## names inclusion</span></span></span>
<span class="r-in"><span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">flows</span>, <span class="st">"destination"</span>, with_names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html" class="external-link">coord_flip</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="autoplot.sim-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">flows</span>, with_names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">90</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="autoplot.sim-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co">## positions</span></span></span>
<span class="r-in"><span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">flows</span>, <span class="st">"attractiveness"</span>, with_positions <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_size.html" class="external-link">scale_size_continuous</a></span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>crs <span class="op">=</span> <span class="st">"epsg:4326"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="autoplot.sim-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">flows</span>, <span class="st">"destination"</span>,</span></span>
<span class="r-in"><span>  with_positions <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  with_names <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_size.html" class="external-link">scale_size_continuous</a></span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>crs <span class="op">=</span> <span class="st">"epsg:4326"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="autoplot.sim-7.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">flows</span>, <span class="st">"destination"</span>,</span></span>
<span class="r-in"><span>  with_positions <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  with_names <span class="op">=</span> <span class="cn">TRUE</span>, with_labels <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_size.html" class="external-link">scale_size_continuous</a></span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>crs <span class="op">=</span> <span class="st">"epsg:4326"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="autoplot.sim-8.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">flows</span>, with_positions <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_linewidth.html" class="external-link">scale_linewidth_continuous</a></span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>crs <span class="op">=</span> <span class="st">"epsg:4326"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="autoplot.sim-9.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">flows</span>,</span></span>
<span class="r-in"><span>  with_positions <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  arrow <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/arrow.html" class="external-link">arrow</a></span><span class="op">(</span>length <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0.025</span>, <span class="st">"npc"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_linewidth.html" class="external-link">scale_linewidth_continuous</a></span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>crs <span class="op">=</span> <span class="st">"epsg:4326"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="autoplot.sim-10.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co">## individual flows combined with destination flows</span></span></span>
<span class="r-in"><span><span class="co">## no arrows</span></span></span>
<span class="r-in"><span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">flows</span>,</span></span>
<span class="r-in"><span>  with_positions <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  show_destination <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_linewidth.html" class="external-link">scale_linewidth_continuous</a></span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>crs <span class="op">=</span> <span class="st">"epsg:4326"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="autoplot.sim-11.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co">## readding arrows</span></span></span>
<span class="r-in"><span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">flows</span>,</span></span>
<span class="r-in"><span>  with_positions <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  show_destination <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  arrow <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/arrow.html" class="external-link">arrow</a></span><span class="op">(</span>length <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0.025</span>, <span class="st">"npc"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_linewidth.html" class="external-link">scale_linewidth_continuous</a></span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>crs <span class="op">=</span> <span class="st">"epsg:4326"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="autoplot.sim-12.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Fabrice Rossi.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

