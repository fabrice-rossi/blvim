<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Compute terminals for a spatial interaction model — terminals • blvim</title><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compute terminals for a spatial interaction model — terminals"><meta name="description" content="This function identifies terminals in the locations underlying the given
spatial interaction model. Terminals are locally dominating locations that
essentially send less to other locations than they receive (see details for
formal definitions). As we compare incoming flows to outgoing flows, terminal
computation is restricted to interaction models in which origin and
destination locations are identical, i.e. models that are not bipartite."><meta property="og:description" content="This function identifies terminals in the locations underlying the given
spatial interaction model. Terminals are locally dominating locations that
essentially send less to other locations than they receive (see details for
formal definitions). As we compare incoming flows to outgoing flows, terminal
computation is restricted to interaction models in which origin and
destination locations are identical, i.e. models that are not bipartite."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">blvim</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/grid.html">Systematic exploration of the BLV solution space</a></li>
    <li><a class="dropdown-item" href="../articles/theory.html">Theoretical Background</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/fabrice-rossi/blvim/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Compute terminals for a spatial interaction model</h1>
      <small class="dont-index">Source: <a href="https://github.com/fabrice-rossi/blvim/blob/main/R/terminals.R" class="external-link"><code>R/terminals.R</code></a></small>
      <div class="d-none name"><code>terminals.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function identifies terminals in the locations underlying the given
spatial interaction model. Terminals are locally dominating locations that
essentially send less to other locations than they receive (see details for
formal definitions). As we compare incoming flows to outgoing flows, terminal
computation is restricted to interaction models in which origin and
destination locations are identical, i.e. models that are not <code>bipartite</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">terminals</span><span class="op">(</span><span class="va">sim</span>, definition <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ND"</span>, <span class="st">"RW"</span><span class="op">)</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-sim">sim<a class="anchor" aria-label="anchor" href="#arg-sim"></a></dt>
<dd><p>a spatial interaction model object</p></dd>


<dt id="arg-definition">definition<a class="anchor" aria-label="anchor" href="#arg-definition"></a></dt>
<dd><p>terminal definition, either <code>"ND"</code> (for Nystuen &amp; Dacey,
default) or <code>"RW"</code> (for Rihll &amp; Wilson), see details.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional parameters</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a vector containing the indexes of the terminals identified from the
flow matrix of the interaction model.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The notion of terminal used in this function is based on seminal work by J.
D. Nystuen and M. F. Dacey (Nystuen &amp; Dacey, 1961), as well as on the follow
up variation from Rihll &amp; Wislon (1987 and 1991). We assume given a square
flow matrix \((Y_{ij})_{1\leq i\leq n, 1\leq j\leq n}\). The incoming flow
at location \(j\) is given by</p>
<p>$$D_j=\sum_{j=i}^{p}Y_{ij},$$</p>
<p>and is used as a measure of importance of this location. Then in Nystuen &amp;
Dacey (1961), location \(j\) is a "terminal point" (or a "central city") if</p>
<p>$$D_j \geq D_{m(j)},$$</p>
<p>where \(m(j)\) is such that</p>
<p>$$\forall l,\quad Y_{jl}\leq Y_{jm(j)}.$$</p>
<p>In words, \(j\) is a terminal if the location \(m(j)\) to which it sends
its largest flow is less important than \(j\) itself, in terms of incoming
flows. This is the definition used by the function when <code>definition</code> is
<code>"ND"</code>.</p>
<p>Rihll &amp; Wilson (1987) use a modified version of this definition described in
details in Rihll and Wilson (1991). With this relaxed version, location
\(j\) is a terminal if</p>
<p>$$\forall i,\quad D_j \geq Y_{ij}.$$</p>
<p>In words, \(j\) is a terminal if it receives more flows than it is sending
to each other location. It is easy to see that each Nystuen &amp; Dacey terminal
is a Rihll &amp; Wilson terminal, but the reverse is false in general. The
function use the Rihll &amp; Wilson definition when <code>definition</code> is <code>"RW"</code></p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Nystuen, J.D. and Dacey, M.F. (1961), "A graph theory
interpretation of nodal regions", Papers and Proceedings of the Regional
Science Association 7: 29–42. <a href="https://doi.org/10.1007/bf01969070" class="external-link">doi:10.1007/bf01969070</a></p>
<p>Rihll, T.E., and Wilson, A.G. (1987). "Spatial interaction and structural
models in historical analysis: some possibilities and an example", Histoire
&amp; Mesure 2: 5–32. <a href="https://doi.org/10.3406/hism.1987.1300" class="external-link">doi:10.3406/hism.1987.1300</a></p>
<p>Rihll, T., and Wilson, A. (1991), "Modelling settlement structures in
ancient Greece: new approaches to the polis", In City and Country in the
Ancient World, Vol. 3, Edited by J. Rich and A. Wallace-Hadrill, 58–95.
London: Routledge.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="sim_is_bipartite.html">sim_is_bipartite()</a></code>, <code><a href="is_terminal.html">is_terminal()</a></code>, <code><a href="grid_is_terminal.html">grid_is_terminal()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">positions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">10</span> <span class="op">*</span> <span class="fl">2</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">distances</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/dist.html" class="external-link">dist</a></span><span class="op">(</span><span class="va">positions</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">production</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">attractiveness</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="blvim.html">blvim</a></span><span class="op">(</span><span class="va">distances</span>, <span class="va">production</span>, <span class="fl">1.3</span>, <span class="fl">2</span>, <span class="va">attractiveness</span>, bipartite <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">terminals</span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 6 9 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 6 9 </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Fabrice Rossi.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

