<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a spatial interaction models data frame from a collection of interaction models — sim_df • blvim</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a spatial interaction models data frame from a collection of interaction models — sim_df"><meta name="description" content="This function build a data frame from a collection of spatial interaction
models. The data frame has a list column sim of type sim_list which
stores the collection of models and classical columns that contain
characteristics of the models. The name of the list column can be set to
something else than sim (but not a name used by other default columns). See
details for the default columns."><meta property="og:description" content="This function build a data frame from a collection of spatial interaction
models. The data frame has a list column sim of type sim_list which
stores the collection of models and classical columns that contain
characteristics of the models. The name of the list column can be set to
something else than sim (but not a name used by other default columns). See
details for the default columns."><meta property="og:image" content="https://fabrice-rossi.github.io/blvim/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">blvim</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/grid.html">Systematic exploration of the BLV solution space</a></li>
    <li><a class="dropdown-item" href="../articles/theory.html">Theoretical Background</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/fabrice-rossi/blvim/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Create a spatial interaction models data frame from a collection of interaction models</h1>
      <small class="dont-index">Source: <a href="https://github.com/fabrice-rossi/blvim/blob/main/R/sim_df.R" class="external-link"><code>R/sim_df.R</code></a></small>
      <div class="d-none name"><code>sim_df.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function build a data frame from a collection of spatial interaction
models. The data frame has a list column <code>sim</code> of type <code>sim_list</code> which
stores the collection of models and classical columns that contain
characteristics of the models. The name of the list column can be set to
something else than <code>sim</code> (but not a name used by other default columns). See
details for the default columns.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sim_df</span><span class="op">(</span><span class="va">x</span>, sim_column <span class="op">=</span> <span class="st">"sim"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>a collection of spatial interaction models, an object of class
<code>sim_list</code></p></dd>


<dt id="arg-sim-column">sim_column<a class="anchor" aria-label="anchor" href="#arg-sim-column"></a></dt>
<dd><p>the name of the <code>sim_list</code> column (default <code>"sim"</code>)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a data frame representation of the spatial interaction model
collection with classes <code>sim_df</code> and <code>data.frame</code></p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The data frame has one row per spatial interaction model and the following
columns:</p><ul><li><p><code>sim</code> (default name): the last column that contains the models</p></li>
<li><p><code>alpha</code>: the return to scale parameter used to build the model</p></li>
<li><p><code>beta</code>: the cost inverse scale parameter used to build the model</p></li>
<li><p><code>diversity</code>: model default <code><a href="diversity.html">diversity()</a></code> (Shannon's diversity)</p></li>
<li><p><code>iterations</code>: the number of iterations used to produce the model (1 for a
static model)</p></li>
<li><p><code>converged</code>: <code>TRUE</code> is the iterative calculation of the model converged
(for models produced by <code><a href="blvim.html">blvim()</a></code> and related approaches), <code>FALSE</code> for no
convergence and <code>NA</code> for static models</p></li>
</ul><p>The resulting object behaves mostly like a <code>data.frame</code> and support standard
extraction and replacement operators. The object tries to keep its <code>sim_df</code>
class during modifications. In particular, <code>names&lt;-.sim_df()</code> tracks
name change for the <code>sim_list</code> column. If a modification or an extraction
operation changes the type of the <code>sim_list</code> column or drops it, the
resulting object is a standard <code>data.frame</code>. See <code><a href="sim_df_extract.html">[.sim_df</a></code>
and <code><a href="names-set-.sim_df.html">names&lt;-.sim_df()</a></code> for details.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">distances</span> <span class="op">&lt;-</span> <span class="va">french_cities_distances</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span> <span class="op">/</span> <span class="fl">1000</span> <span class="co">## convert to km</span></span></span>
<span class="r-in"><span><span class="va">production</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">attractiveness</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">french_cities</span><span class="op">$</span><span class="va">area</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">all_flows</span> <span class="op">&lt;-</span> <span class="fu"><a href="grid_blvim.html">grid_blvim</a></span><span class="op">(</span><span class="va">distances</span>, <span class="va">production</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1.05</span>, <span class="fl">1.45</span>, by <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, by <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">/</span> <span class="fl">400</span>,</span></span>
<span class="r-in"><span>  <span class="va">attractiveness</span>,</span></span>
<span class="r-in"><span>  bipartite <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  epsilon <span class="op">=</span> <span class="fl">0.1</span>, iter_max <span class="op">=</span> <span class="fl">1000</span>,</span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">all_flows_df</span> <span class="op">&lt;-</span> <span class="fu">sim_df</span><span class="op">(</span><span class="va">all_flows</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">all_flows_df</span><span class="op">$</span><span class="va">converged</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  TRUE  TRUE FALSE FALSE  TRUE  TRUE FALSE  TRUE  TRUE FALSE FALSE  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13]  TRUE  TRUE FALSE</span>
<span class="r-in"><span><span class="co">## change the name of the sim column</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">all_flows_df</span><span class="op">)</span><span class="op">[</span><span class="fl">6</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"models"</span></span></span>
<span class="r-in"><span><span class="co">## still a sim_df</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">all_flows_df</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "sim_df"     "data.frame"</span>
<span class="r-in"><span><span class="co">## get the models</span></span></span>
<span class="r-in"><span><span class="fu"><a href="sim_column.html">sim_column</a></span><span class="op">(</span><span class="va">all_flows_df</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Collection of <span style="color: #0000BB;">15</span> spatial interaction models with <span style="color: #0000BB;">10</span> origin locations and <span style="color: #0000BB;">10</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> destination locations computed on the following grid:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> • alpha: <span style="color: #0000BB;">1.05</span>, <span style="color: #0000BB;">1.25</span>, and <span style="color: #0000BB;">1.45</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> • beta: <span style="color: #0000BB;">0.0025</span>, <span style="color: #0000BB;">0.00375</span>, <span style="color: #0000BB;">0.005</span>, <span style="color: #0000BB;">0.00625</span>, and <span style="color: #0000BB;">0.0075</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Fabrice Rossi.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

